include /mixins/forms.pug

doctype html
html(lang='en')
  head
   title= 'Task Manager'
   script(src='/assets/main.js')
  body
    nav.navbar.navbar-expand-md.navbar-ligth.bg-faded
      a.navbar-brand(href="/") Task Manager
      button.navbar-toggler(type='button' data-toggle='collapse' data-target='#collapsibleNavbar')
        span.navbar-toggler-icon
      div.collapse.navbar-collapse#collapsibleNavbar
        ul.navbar-nav.mr-auto
          li.nav-item.active
            a.nav-link(href=urlForRouter('users')) Users
          if isSignedIn()
            li.nav-item
              a.nav-link(href=urlForRouter('tasks')) Tasks
        ul.navbar-nav.navbar-right
          if isSignedIn()
            li.nav-item.dropdown
              a.nav-link.dropdown-toggle(data-toggle='dropdown' role='button' href='#' aria-haspopup='true' aria-expanded='false')
                | Logged in as #{userFullName}
              .dropdown-menu
                a.dropdown-item(href=`/users/${userId}/edit`) Edit                
                a.dropdown-item(href=`/users/${userId}` data-method='delete' rel='nofollow' data-confirm='Are you sure you want to delete?') Delete                              
            li.nav-item
              a.nav-link(href= urlForRouter('session') data-method='delete' rel='nofollow' data-confirm='You want to log out?') Sign Out              
          else
            li.nav-item
              a.nav-link(href=urlForRouter('newSession')) Sign In
            li.nav-item
              a.nav-link(href=urlForRouter('newUser')) Sign Up
    .container-fluid
      - const msg = flash.get()
      if msg
        .alert.alert-info.alert-dismissible.m-3(role='alert')= msg
          button.close(type='button' data-dismiss='alert' aria-label='close')
            span(aria-hidden='true') &times;
      block content
